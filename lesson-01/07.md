db.products.insertOne({
  sku: "CAMERA-CANON-EOS-R5",
  name: "Canon EOS R5",
  category: "Electronics",
  price: 3899.00,
  tags: ["camera", "professional", "mirrorless", "4k", "canon"],
  features: ["45MP sensor", "8K video", "IBIS", "Dual card slots"],
  status: "active"
})


{
  acknowledged: true,
  insertedId: ObjectId('68f8a603d9a2753fd9292efe')
}




db.users.insertOne({
  name: { first: "Lisa", last: "Chen" },
  email: "lisa.chen@example.com",
  interests: ["photography", "travel", "technology", "cooking"],
  favoriteProducts: [],
  role: "customer",
  status: "active"
})
{
  acknowledged: true,
  insertedId: ObjectId('68f8a60fd9a2753fd9292eff')
}



db.products.find({ tags: "camera" })
{
  _id: ObjectId('68f8a603d9a2753fd9292efe'),
  sku: 'CAMERA-CANON-EOS-R5',
  name: 'Canon EOS R5',
  category: 'Electronics',
  price: 3899,
  tags: [
    'camera',
    'professional',
    'mirrorless',
    '4k',
    'canon'
  ],
  features: [
    '45MP sensor',
    '8K video',
    'IBIS',
    'Dual card slots'
  ],
  status: 'active'
}




db.products.find({ tags: { $in: ["sale", "clearance", "discount"] } })



db.products.find({ tags: { $all: ["wireless", "premium"] } })





db.products.find({ tags: { $size: 5 } })
{
  _id: ObjectId('68f8a603d9a2753fd9292efe'),
  sku: 'CAMERA-CANON-EOS-R5',
  name: 'Canon EOS R5',
  category: 'Electronics',
  price: 3899,
  tags: [
    'camera',
    'professional',
    'mirrorless',
    '4k',
    'canon'
  ],
  features: [
    '45MP sensor',
    '8K video',
    'IBIS',
    'Dual card slots'
  ],
  status: 'active'
}




db.users.find({ favoriteProducts: { $size: 0 } })

{
  _id: ObjectId('68f8a60fd9a2753fd9292eff'),
  name: {
    first: 'Lisa',
    last: 'Chen'
  },
  email: 'lisa.chen@example.com',
  interests: [
    'photography',
    'travel',
    'technology',
    'cooking'
  ],
  favoriteProducts: [],
  role: 'customer',
  status: 'active'
}










db.products.updateOne(
  { sku: "CAMERA-CANON-EOS-R5" },
  { $push: { tags: "featured" } }
)
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 1,
  modifiedCount: 1,
  upsertedCount: 0
}








db.products.updateOne(
  { sku: "CAMERA-CANON-EOS-R5" },
  { $push: { tags: { $each: ["new-arrival", "bestseller"] } } }
)
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 1,
  modifiedCount: 1,
  upsertedCount: 0
}



db.products.updateOne(
  { sku: "CAMERA-CANON-EOS-R5" },
  { $addToSet: { tags: "premium" } }
)
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 1,
  modifiedCount: 1,
  upsertedCount: 0
}





db.products.updateOne(
  { sku: "CAMERA-CANON-EOS-R5" },
  { $addToSet: { tags: { $each: ["high-end", "recommended"] } } }
)
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 1,
  modifiedCount: 1,
  upsertedCount: 0
}



db.products.updateOne(
  { sku: "CAMERA-CANON-EOS-R5" },
  { $pull: { tags: "featured" } }
)
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 1,
  modifiedCount: 1,
  upsertedCount: 0
}


db.products.updateOne(
  { sku: "CAMERA-CANON-EOS-R5" },
  { $pull: { tags: { $in: ["new-arrival", "sale"] } } }
)
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 1,
  modifiedCount: 0,
  upsertedCount: 0
}







db.products.updateOne(
  { sku: "CAMERA-CANON-EOS-R5" },
  { $pop: { tags: 1 } }
)
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 1,
  modifiedCount: 1,
  upsertedCount: 0
}






db.products.updateOne(
  { sku: "CAMERA-CANON-EOS-R5" },
  { $pop: { tags: -1 } }
)
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 1,
  modifiedCount: 1,
  upsertedCount: 0
}





db.products.insertOne({
  sku: "BOOK-MONGODB-GUIDE",
  name: "MongoDB: The Definitive Guide",
  category: "Books",
  price: 49.99,
  reviews: [
    { author: "Alice", rating: 5, comment: "Excellent book!", date: new Date("2024-01-15") },
    { author: "Bob", rating: 4, comment: "Very informative", date: new Date("2024-01-18") }
  ],
  status: "active"
})
{
  acknowledged: true,
  insertedId: ObjectId('68f8a6c9d9a2753fd9292f00')
}












db.products.updateOne(
  { sku: "BOOK-MONGODB-GUIDE" },
  { $push: { reviews: { author: "Charlie", rating: 5, comment: "Best MongoDB resource!", date: new Date() } } }
)
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 1,
  modifiedCount: 1,
  upsertedCount: 0
}









db.products.find({ "reviews.rating": 5 })
{
  _id: ObjectId('68f8a6c9d9a2753fd9292f00'),
  sku: 'BOOK-MONGODB-GUIDE',
  name: 'MongoDB: The Definitive Guide',
  category: 'Books',
  price: 49.99,
  reviews: [
    {
      author: 'Alice',
      rating: 5,
      comment: 'Excellent book!',
      date: 2024-01-15T00:00:00.000Z
    },
    {
      author: 'Bob',
      rating: 4,
      comment: 'Very informative',
      date: 2024-01-18T00:00:00.000Z
    },
    {
      author: 'Charlie',
      rating: 5,
      comment: 'Best MongoDB resource!',
      date: 2025-10-22T09:41:39.887Z
    }
  ],
  status: 'active'
}










db.products.find({
  reviews: { $elemMatch: { author: "Alice", rating: 5 } }
})
{
  _id: ObjectId('68f8a6c9d9a2753fd9292f00'),
  sku: 'BOOK-MONGODB-GUIDE',
  name: 'MongoDB: The Definitive Guide',
  category: 'Books',
  price: 49.99,
  reviews: [
    {
      author: 'Alice',
      rating: 5,
      comment: 'Excellent book!',
      date: 2024-01-15T00:00:00.000Z
    },
    {
      author: 'Bob',
      rating: 4,
      comment: 'Very informative',
      date: 2024-01-18T00:00:00.000Z
    },
    {
      author: 'Charlie',
      rating: 5,
      comment: 'Best MongoDB resource!',
      date: 2025-10-22T09:41:39.887Z
    }
  ],
  status: 'active'
}





db.products.updateOne(
  { sku: "BOOK-MONGODB-GUIDE", "reviews.author": "Alice" },
  { $set: { "reviews.$.rating": 5 } }
)
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 1,
  modifiedCount: 0,
  upsertedCount: 0
}





db.products.updateOne(
  { sku: "BOOK-MONGODB-GUIDE" },
  { $set: { "reviews.1.comment": "Updated comment" } }
)
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 1,
  modifiedCount: 0,
  upsertedCount: 0
}




db.products.updateOne(
  { sku: "BOOK-MONGODB-GUIDE" },
  { $pull: { reviews: { author: "Alice" } } }
)
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 1,
  modifiedCount: 1,
  upsertedCount: 0
}





db.products.updateOne(
  { sku: "CAMERA-CANON-EOS-R5" },
  { $push: { tags: { $each: ["editor-choice"], $position: 0 } } }
)
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 1,
  modifiedCount: 1,
  upsertedCount: 0
}




db.products.updateOne(
  { sku: "BOOK-MONGODB-GUIDE" },
  {
    $push: {
      reviews: {
        $each: [
          { author: "Dave", rating: 4, comment: "Good book", date: new Date() }
        ],
        $sort: { date: -1 },
        $slice: 5
      }
    }
  }
)
{
  acknowledged: true,
  insertedId: null,
  matchedCount: 1,
  modifiedCount: 1,
  upsertedCount: 0
}


